"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/login/page",{

/***/ "(app-pages-browser)/./hooks/useAuth.ts":
/*!**************************!*\
  !*** ./hooks/useAuth.ts ***!
  \**************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: () => (/* binding */ useAuth)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./lib/supabase.ts\");\n/* harmony import */ var _utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/usernameGenerator */ \"(app-pages-browser)/./utils/usernameGenerator.ts\");\n/* harmony import */ var _utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/utils/profilePictureSelector */ \"(app-pages-browser)/./utils/profilePictureSelector.ts\");\n/* __next_internal_client_entry_do_not_use__ useAuth auto */ \n\n\n\nconst useAuth = ()=>{\n    const [session, setSession] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(true);\n    const [error, setError] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [isAdmin, setIsAdmin] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n    const [username, setUsername] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    const [profilePicture, setProfilePicture] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)({\n        \"useAuth.useEffect\": ()=>{\n            const initializeAuth = {\n                \"useAuth.useEffect.initializeAuth\": async ()=>{\n                    setLoading(true);\n                    const { session: currentSession, error } = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.getSession)();\n                    if (error) {\n                        console.error(\"Error getting session:\", error);\n                        setError(error.message);\n                    } else {\n                        var _currentSession_user_email;\n                        setSession(currentSession);\n                        // Check if user is admin by looking at their email\n                        if (currentSession === null || currentSession === void 0 ? void 0 : (_currentSession_user_email = currentSession.user.email) === null || _currentSession_user_email === void 0 ? void 0 : _currentSession_user_email.endsWith(\"@admin.com\")) {\n                            setIsAdmin(true);\n                        } else if (currentSession) {\n                            // For regular users, try to get existing username or generate a new one\n                            const savedUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.getSavedUsername)();\n                            if (savedUsername) {\n                                setUsername(savedUsername);\n                            } else {\n                                const newUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.generateRandomUsername)();\n                                (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.saveUsername)(newUsername);\n                                setUsername(newUsername);\n                            }\n                            // Get existing profile picture or fetch a new one\n                            const savedProfilePicture = (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.getSavedProfilePicture)();\n                            if (savedProfilePicture) {\n                                setProfilePicture(savedProfilePicture);\n                            } else {\n                                try {\n                                    const newProfilePicture = await (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.fetchRandomProfilePicture)();\n                                    (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.saveProfilePicture)(newProfilePicture);\n                                    setProfilePicture(newProfilePicture);\n                                } catch (error) {\n                                    console.error(\"Error fetching profile picture:\", error);\n                                    setProfilePicture(\"/profiles/default_profile.jpeg\");\n                                }\n                            }\n                        }\n                    }\n                    setLoading(false);\n                }\n            }[\"useAuth.useEffect.initializeAuth\"];\n            initializeAuth();\n            // Set up auth state listener\n            const { data: authListener } = _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.onAuthStateChange({\n                \"useAuth.useEffect\": async (event, session)=>{\n                    var _session_user_email;\n                    setSession(session);\n                    if (session === null || session === void 0 ? void 0 : (_session_user_email = session.user.email) === null || _session_user_email === void 0 ? void 0 : _session_user_email.endsWith(\"@admin.com\")) {\n                        setIsAdmin(true);\n                    } else {\n                        setIsAdmin(false);\n                        // If user just signed in, check for username/profile or generate new ones\n                        if (event === \"SIGNED_IN\") {\n                            const savedUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.getSavedUsername)();\n                            if (savedUsername) {\n                                setUsername(savedUsername);\n                            } else {\n                                const newUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.generateRandomUsername)();\n                                (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.saveUsername)(newUsername);\n                                setUsername(newUsername);\n                            }\n                            const savedProfilePicture = (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.getSavedProfilePicture)();\n                            if (savedProfilePicture) {\n                                setProfilePicture(savedProfilePicture);\n                            } else {\n                                try {\n                                    const newProfilePicture = await (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.fetchRandomProfilePicture)();\n                                    (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.saveProfilePicture)(newProfilePicture);\n                                    setProfilePicture(newProfilePicture);\n                                } catch (error) {\n                                    console.error(\"Error fetching profile picture:\", error);\n                                    setProfilePicture(\"/profiles/default_profile.jpeg\");\n                                }\n                            }\n                        } else if (event === \"SIGNED_OUT\") {\n                            setUsername(null);\n                            setProfilePicture(null);\n                        }\n                    }\n                }\n            }[\"useAuth.useEffect\"]);\n            return ({\n                \"useAuth.useEffect\": ()=>{\n                    if (authListener && authListener.subscription) {\n                        authListener.subscription.unsubscribe();\n                    }\n                }\n            })[\"useAuth.useEffect\"];\n        }\n    }[\"useAuth.useEffect\"], []);\n    const handleSignInAnonymously = async ()=>{\n        setLoading(true);\n        setError(null);\n        const { data, error } = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.signInAnonymously)();\n        if (error) {\n            setError(error.message);\n        } else {\n            setSession(data.session);\n            // Generate and save a random username for the new anonymous user\n            const newUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.generateRandomUsername)();\n            (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.saveUsername)(newUsername);\n            setUsername(newUsername);\n            // Generate and save a random profile picture\n            try {\n                const newProfilePicture = await (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.fetchRandomProfilePicture)();\n                (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.saveProfilePicture)(newProfilePicture);\n                setProfilePicture(newProfilePicture);\n            } catch (error) {\n                console.error(\"Error fetching profile picture:\", error);\n                setProfilePicture(\"/profiles/default_profile.jpeg\");\n            }\n        }\n        setLoading(false);\n        return {\n            data,\n            error\n        };\n    };\n    // Function to refresh the current username\n    const handleRefreshUsername = ()=>{\n        if (session && !isAdmin) {\n            const newUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.refreshUsername)();\n            setUsername(newUsername);\n            return newUsername;\n        }\n        return null;\n    };\n    // Function to refresh the current profile picture\n    const handleRefreshProfilePicture = async ()=>{\n        if (session && !isAdmin) {\n            try {\n                const newProfilePicture = await (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.refreshProfilePicture)();\n                setProfilePicture(newProfilePicture);\n                return newProfilePicture;\n            } catch (error) {\n                console.error(\"Error refreshing profile picture:\", error);\n                return null;\n            }\n        }\n        return null;\n    };\n    const handleSignOut = async ()=>{\n        setLoading(true);\n        setError(null);\n        const { error } = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.signOut)();\n        if (error) {\n            setError(error.message);\n        } else {\n            setSession(null);\n            setIsAdmin(false);\n            setUsername(null);\n            setProfilePicture(null);\n            // Clear the username and profile picture from local storage on sign out\n            if (true) {\n                localStorage.removeItem(\"randomUsername\");\n                localStorage.removeItem(\"profilePicture\");\n            }\n        }\n        setLoading(false);\n        return {\n            error\n        };\n    };\n    const handleSignInWithEmail = async (email, password)=>{\n        setLoading(true);\n        setError(null);\n        const { data, error } = await (0,_lib_supabase__WEBPACK_IMPORTED_MODULE_1__.signInWithEmail)(email, password);\n        if (error) {\n            setError(error.message);\n        } else {\n            var _data_session_user_email, _data_session;\n            setSession(data.session);\n            // Check if user is admin\n            if ((_data_session = data.session) === null || _data_session === void 0 ? void 0 : (_data_session_user_email = _data_session.user.email) === null || _data_session_user_email === void 0 ? void 0 : _data_session_user_email.endsWith(\"@admin.com\")) {\n                setIsAdmin(true);\n            } else {\n                // For regular users, try to get existing username or generate a new one\n                const savedUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.getSavedUsername)();\n                if (savedUsername) {\n                    setUsername(savedUsername);\n                } else {\n                    const newUsername = (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.generateRandomUsername)();\n                    (0,_utils_usernameGenerator__WEBPACK_IMPORTED_MODULE_2__.saveUsername)(newUsername);\n                    setUsername(newUsername);\n                }\n                // Get existing profile picture or fetch a new one\n                const savedProfilePicture = (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.getSavedProfilePicture)();\n                if (savedProfilePicture) {\n                    setProfilePicture(savedProfilePicture);\n                } else {\n                    try {\n                        const newProfilePicture = await (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.fetchRandomProfilePicture)();\n                        (0,_utils_profilePictureSelector__WEBPACK_IMPORTED_MODULE_3__.saveProfilePicture)(newProfilePicture);\n                        setProfilePicture(newProfilePicture);\n                    } catch (error) {\n                        console.error(\"Error fetching profile picture:\", error);\n                        setProfilePicture(\"/profiles/default_profile.jpeg\");\n                    }\n                }\n            }\n        }\n        setLoading(false);\n        return {\n            data,\n            error\n        };\n    };\n    return {\n        session,\n        user: (session === null || session === void 0 ? void 0 : session.user) || null,\n        isAdmin,\n        loading,\n        error,\n        username,\n        profilePicture,\n        signInAnonymously: handleSignInAnonymously,\n        signInWithEmail: handleSignInWithEmail,\n        signOut: handleSignOut,\n        refreshUsername: handleRefreshUsername,\n        refreshProfilePicture: handleRefreshProfilePicture\n    };\n};\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQVc7WUFDYixPQUFPO2dCQUNMLHdFQUF3RTtnQkFDeEUsTUFBTVksZ0JBQWdCNUIsMEVBQWdCQTtnQkFDdEMsSUFBSTRCLGVBQWU7b0JBQ2pCVixZQUFZVTtnQkFDZCxPQUFPO29CQUNMLE1BQU1DLGNBQWM5QixnRkFBc0JBO29CQUMxQ0Usc0VBQVlBLENBQUM0QjtvQkFDYlgsWUFBWVc7Z0JBQ2Q7Z0JBRUEsa0RBQWtEO2dCQUNsRCxNQUFNQyxzQkFBc0IxQixxRkFBc0JBO2dCQUNsRCxJQUFJMEIscUJBQXFCO29CQUN2QlYsa0JBQWtCVTtnQkFDcEIsT0FBTztvQkFDTCxJQUFJO3dCQUNGLE1BQU1DLG9CQUFvQixNQUFNekIsd0ZBQXlCQTt3QkFDekRELGlGQUFrQkEsQ0FBQzBCO3dCQUNuQlgsa0JBQWtCVztvQkFDcEIsRUFBRSxPQUFPbEIsT0FBTzt3QkFDZFUsUUFBUVYsS0FBSyxDQUFDLG1DQUFtQ0E7d0JBQ2pETyxrQkFBa0I7b0JBQ3BCO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBUixXQUFXO1FBQ1gsT0FBTztZQUFFb0I7WUFBTW5CO1FBQU07SUFDdkI7SUFFQSxPQUFPO1FBQ0xKO1FBQ0FnQixNQUFNaEIsQ0FBQUEsb0JBQUFBLDhCQUFBQSxRQUFTZ0IsSUFBSSxLQUFJO1FBQ3ZCVjtRQUNBSjtRQUNBRTtRQUNBSTtRQUNBRTtRQUNBeEIsbUJBQW1CNEM7UUFDbkIzQyxpQkFBaUJpRDtRQUNqQmhELFNBQVM2QztRQUNUeEMsaUJBQWlCc0M7UUFDakJqQyx1QkFBdUJrQztJQUN6QjtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIi9ob21lL3RyLWdnci9OZXJkUHJvamVjdHMvbmV4dGpzL2FpLW1vZGVyYXRpb24vaG9va3MvdXNlQXV0aC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJcInVzZSBjbGllbnRcIjtcblxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gXCJyZWFjdFwiO1xuaW1wb3J0IHtcbiAgc3VwYWJhc2UsXG4gIHNpZ25JbkFub255bW91c2x5LFxuICBzaWduSW5XaXRoRW1haWwsXG4gIHNpZ25PdXQsXG4gIGdldFNlc3Npb24sXG59IGZyb20gXCJAL2xpYi9zdXBhYmFzZVwiO1xuaW1wb3J0IHsgU2Vzc2lvbiB9IGZyb20gXCJAc3VwYWJhc2Uvc3VwYWJhc2UtanNcIjtcbmltcG9ydCB7XG4gIGdlbmVyYXRlUmFuZG9tVXNlcm5hbWUsXG4gIGdldFNhdmVkVXNlcm5hbWUsXG4gIHNhdmVVc2VybmFtZSxcbiAgcmVmcmVzaFVzZXJuYW1lIGFzIHJlZnJlc2hSYW5kb21Vc2VybmFtZSxcbn0gZnJvbSBcIkAvdXRpbHMvdXNlcm5hbWVHZW5lcmF0b3JcIjtcbmltcG9ydCB7XG4gIGdldFNhdmVkUHJvZmlsZVBpY3R1cmUsXG4gIHNhdmVQcm9maWxlUGljdHVyZSxcbiAgZmV0Y2hSYW5kb21Qcm9maWxlUGljdHVyZSxcbiAgcmVmcmVzaFByb2ZpbGVQaWN0dXJlLFxufSBmcm9tIFwiQC91dGlscy9wcm9maWxlUGljdHVyZVNlbGVjdG9yXCI7XG5cbmV4cG9ydCBjb25zdCB1c2VBdXRoID0gKCkgPT4ge1xuICBjb25zdCBbc2Vzc2lvbiwgc2V0U2Vzc2lvbl0gPSB1c2VTdGF0ZTxTZXNzaW9uIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtsb2FkaW5nLCBzZXRMb2FkaW5nXSA9IHVzZVN0YXRlKHRydWUpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlPHN0cmluZyB8IG51bGw+KG51bGwpO1xuICBjb25zdCBbaXNBZG1pbiwgc2V0SXNBZG1pbl0gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFt1c2VybmFtZSwgc2V0VXNlcm5hbWVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG4gIGNvbnN0IFtwcm9maWxlUGljdHVyZSwgc2V0UHJvZmlsZVBpY3R1cmVdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsaXplQXV0aCA9IGFzeW5jICgpID0+IHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICBjb25zdCB7IHNlc3Npb246IGN1cnJlbnRTZXNzaW9uLCBlcnJvciB9ID0gYXdhaXQgZ2V0U2Vzc2lvbigpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGdldHRpbmcgc2Vzc2lvbjpcIiwgZXJyb3IpO1xuICAgICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNldFNlc3Npb24oY3VycmVudFNlc3Npb24pO1xuXG4gICAgICAgIC8vIENoZWNrIGlmIHVzZXIgaXMgYWRtaW4gYnkgbG9va2luZyBhdCB0aGVpciBlbWFpbFxuICAgICAgICBpZiAoY3VycmVudFNlc3Npb24/LnVzZXIuZW1haWw/LmVuZHNXaXRoKFwiQGFkbWluLmNvbVwiKSkge1xuICAgICAgICAgIHNldElzQWRtaW4odHJ1ZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoY3VycmVudFNlc3Npb24pIHtcbiAgICAgICAgICAvLyBGb3IgcmVndWxhciB1c2VycywgdHJ5IHRvIGdldCBleGlzdGluZyB1c2VybmFtZSBvciBnZW5lcmF0ZSBhIG5ldyBvbmVcbiAgICAgICAgICBjb25zdCBzYXZlZFVzZXJuYW1lID0gZ2V0U2F2ZWRVc2VybmFtZSgpO1xuICAgICAgICAgIGlmIChzYXZlZFVzZXJuYW1lKSB7XG4gICAgICAgICAgICBzZXRVc2VybmFtZShzYXZlZFVzZXJuYW1lKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc3QgbmV3VXNlcm5hbWUgPSBnZW5lcmF0ZVJhbmRvbVVzZXJuYW1lKCk7XG4gICAgICAgICAgICBzYXZlVXNlcm5hbWUobmV3VXNlcm5hbWUpO1xuICAgICAgICAgICAgc2V0VXNlcm5hbWUobmV3VXNlcm5hbWUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEdldCBleGlzdGluZyBwcm9maWxlIHBpY3R1cmUgb3IgZmV0Y2ggYSBuZXcgb25lXG4gICAgICAgICAgY29uc3Qgc2F2ZWRQcm9maWxlUGljdHVyZSA9IGdldFNhdmVkUHJvZmlsZVBpY3R1cmUoKTtcbiAgICAgICAgICBpZiAoc2F2ZWRQcm9maWxlUGljdHVyZSkge1xuICAgICAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUoc2F2ZWRQcm9maWxlUGljdHVyZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVQaWN0dXJlID0gYXdhaXQgZmV0Y2hSYW5kb21Qcm9maWxlUGljdHVyZSgpO1xuICAgICAgICAgICAgICBzYXZlUHJvZmlsZVBpY3R1cmUobmV3UHJvZmlsZVBpY3R1cmUpO1xuICAgICAgICAgICAgICBzZXRQcm9maWxlUGljdHVyZShuZXdQcm9maWxlUGljdHVyZSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZSBwaWN0dXJlOlwiLCBlcnJvcik7XG4gICAgICAgICAgICAgIHNldFByb2ZpbGVQaWN0dXJlKFwiL3Byb2ZpbGVzL2RlZmF1bHRfcHJvZmlsZS5qcGVnXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICB9O1xuXG4gICAgaW5pdGlhbGl6ZUF1dGgoKTtcblxuICAgIC8vIFNldCB1cCBhdXRoIHN0YXRlIGxpc3RlbmVyXG4gICAgY29uc3QgeyBkYXRhOiBhdXRoTGlzdGVuZXIgfSA9IHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoXG4gICAgICBhc3luYyAoZXZlbnQsIHNlc3Npb24pID0+IHtcbiAgICAgICAgc2V0U2Vzc2lvbihzZXNzaW9uKTtcblxuICAgICAgICBpZiAoc2Vzc2lvbj8udXNlci5lbWFpbD8uZW5kc1dpdGgoXCJAYWRtaW4uY29tXCIpKSB7XG4gICAgICAgICAgc2V0SXNBZG1pbih0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzZXRJc0FkbWluKGZhbHNlKTtcblxuICAgICAgICAgIC8vIElmIHVzZXIganVzdCBzaWduZWQgaW4sIGNoZWNrIGZvciB1c2VybmFtZS9wcm9maWxlIG9yIGdlbmVyYXRlIG5ldyBvbmVzXG4gICAgICAgICAgaWYgKGV2ZW50ID09PSBcIlNJR05FRF9JTlwiKSB7XG4gICAgICAgICAgICBjb25zdCBzYXZlZFVzZXJuYW1lID0gZ2V0U2F2ZWRVc2VybmFtZSgpO1xuICAgICAgICAgICAgaWYgKHNhdmVkVXNlcm5hbWUpIHtcbiAgICAgICAgICAgICAgc2V0VXNlcm5hbWUoc2F2ZWRVc2VybmFtZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb25zdCBuZXdVc2VybmFtZSA9IGdlbmVyYXRlUmFuZG9tVXNlcm5hbWUoKTtcbiAgICAgICAgICAgICAgc2F2ZVVzZXJuYW1lKG5ld1VzZXJuYW1lKTtcbiAgICAgICAgICAgICAgc2V0VXNlcm5hbWUobmV3VXNlcm5hbWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBjb25zdCBzYXZlZFByb2ZpbGVQaWN0dXJlID0gZ2V0U2F2ZWRQcm9maWxlUGljdHVyZSgpO1xuICAgICAgICAgICAgaWYgKHNhdmVkUHJvZmlsZVBpY3R1cmUpIHtcbiAgICAgICAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUoc2F2ZWRQcm9maWxlUGljdHVyZSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVQaWN0dXJlID0gYXdhaXQgZmV0Y2hSYW5kb21Qcm9maWxlUGljdHVyZSgpO1xuICAgICAgICAgICAgICAgIHNhdmVQcm9maWxlUGljdHVyZShuZXdQcm9maWxlUGljdHVyZSk7XG4gICAgICAgICAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUobmV3UHJvZmlsZVBpY3R1cmUpO1xuICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9maWxlIHBpY3R1cmU6XCIsIGVycm9yKTtcbiAgICAgICAgICAgICAgICBzZXRQcm9maWxlUGljdHVyZShcIi9wcm9maWxlcy9kZWZhdWx0X3Byb2ZpbGUuanBlZ1wiKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQgPT09IFwiU0lHTkVEX09VVFwiKSB7XG4gICAgICAgICAgICBzZXRVc2VybmFtZShudWxsKTtcbiAgICAgICAgICAgIHNldFByb2ZpbGVQaWN0dXJlKG51bGwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG5cbiAgICByZXR1cm4gKCkgPT4ge1xuICAgICAgaWYgKGF1dGhMaXN0ZW5lciAmJiBhdXRoTGlzdGVuZXIuc3Vic2NyaXB0aW9uKSB7XG4gICAgICAgIGF1dGhMaXN0ZW5lci5zdWJzY3JpcHRpb24udW5zdWJzY3JpYmUoKTtcbiAgICAgIH1cbiAgICB9O1xuICB9LCBbXSk7XG5cbiAgY29uc3QgaGFuZGxlU2lnbkluQW5vbnltb3VzbHkgPSBhc3luYyAoKSA9PiB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHNpZ25JbkFub255bW91c2x5KCk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIHNldEVycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzZXRTZXNzaW9uKGRhdGEuc2Vzc2lvbik7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGFuZCBzYXZlIGEgcmFuZG9tIHVzZXJuYW1lIGZvciB0aGUgbmV3IGFub255bW91cyB1c2VyXG4gICAgICBjb25zdCBuZXdVc2VybmFtZSA9IGdlbmVyYXRlUmFuZG9tVXNlcm5hbWUoKTtcbiAgICAgIHNhdmVVc2VybmFtZShuZXdVc2VybmFtZSk7XG4gICAgICBzZXRVc2VybmFtZShuZXdVc2VybmFtZSk7XG5cbiAgICAgIC8vIEdlbmVyYXRlIGFuZCBzYXZlIGEgcmFuZG9tIHByb2ZpbGUgcGljdHVyZVxuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgbmV3UHJvZmlsZVBpY3R1cmUgPSBhd2FpdCBmZXRjaFJhbmRvbVByb2ZpbGVQaWN0dXJlKCk7XG4gICAgICAgIHNhdmVQcm9maWxlUGljdHVyZShuZXdQcm9maWxlUGljdHVyZSk7XG4gICAgICAgIHNldFByb2ZpbGVQaWN0dXJlKG5ld1Byb2ZpbGVQaWN0dXJlKTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBwcm9maWxlIHBpY3R1cmU6XCIsIGVycm9yKTtcbiAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUoXCIvcHJvZmlsZXMvZGVmYXVsdF9wcm9maWxlLmpwZWdcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgfTtcblxuICAvLyBGdW5jdGlvbiB0byByZWZyZXNoIHRoZSBjdXJyZW50IHVzZXJuYW1lXG4gIGNvbnN0IGhhbmRsZVJlZnJlc2hVc2VybmFtZSA9ICgpID0+IHtcbiAgICBpZiAoc2Vzc2lvbiAmJiAhaXNBZG1pbikge1xuICAgICAgY29uc3QgbmV3VXNlcm5hbWUgPSByZWZyZXNoUmFuZG9tVXNlcm5hbWUoKTtcbiAgICAgIHNldFVzZXJuYW1lKG5ld1VzZXJuYW1lKTtcbiAgICAgIHJldHVybiBuZXdVc2VybmFtZTtcbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgLy8gRnVuY3Rpb24gdG8gcmVmcmVzaCB0aGUgY3VycmVudCBwcm9maWxlIHBpY3R1cmVcbiAgY29uc3QgaGFuZGxlUmVmcmVzaFByb2ZpbGVQaWN0dXJlID0gYXN5bmMgKCkgPT4ge1xuICAgIGlmIChzZXNzaW9uICYmICFpc0FkbWluKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBuZXdQcm9maWxlUGljdHVyZSA9IGF3YWl0IHJlZnJlc2hQcm9maWxlUGljdHVyZSgpO1xuICAgICAgICBzZXRQcm9maWxlUGljdHVyZShuZXdQcm9maWxlUGljdHVyZSk7XG4gICAgICAgIHJldHVybiBuZXdQcm9maWxlUGljdHVyZTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWZyZXNoaW5nIHByb2ZpbGUgcGljdHVyZTpcIiwgZXJyb3IpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2lnbk91dCA9IGFzeW5jICgpID0+IHtcbiAgICBzZXRMb2FkaW5nKHRydWUpO1xuICAgIHNldEVycm9yKG51bGwpO1xuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc2lnbk91dCgpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2Vzc2lvbihudWxsKTtcbiAgICAgIHNldElzQWRtaW4oZmFsc2UpO1xuICAgICAgc2V0VXNlcm5hbWUobnVsbCk7XG4gICAgICBzZXRQcm9maWxlUGljdHVyZShudWxsKTtcbiAgICAgIC8vIENsZWFyIHRoZSB1c2VybmFtZSBhbmQgcHJvZmlsZSBwaWN0dXJlIGZyb20gbG9jYWwgc3RvcmFnZSBvbiBzaWduIG91dFxuICAgICAgaWYgKHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJyYW5kb21Vc2VybmFtZVwiKTtcbiAgICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oXCJwcm9maWxlUGljdHVyZVwiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzZXRMb2FkaW5nKGZhbHNlKTtcbiAgICByZXR1cm4geyBlcnJvciB9O1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNpZ25JbldpdGhFbWFpbCA9IGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB7XG4gICAgc2V0TG9hZGluZyh0cnVlKTtcbiAgICBzZXRFcnJvcihudWxsKTtcblxuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHNpZ25JbldpdGhFbWFpbChlbWFpbCwgcGFzc3dvcmQpO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBzZXRFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0U2Vzc2lvbihkYXRhLnNlc3Npb24pO1xuICAgICAgLy8gQ2hlY2sgaWYgdXNlciBpcyBhZG1pblxuICAgICAgaWYgKGRhdGEuc2Vzc2lvbj8udXNlci5lbWFpbD8uZW5kc1dpdGgoXCJAYWRtaW4uY29tXCIpKSB7XG4gICAgICAgIHNldElzQWRtaW4odHJ1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBGb3IgcmVndWxhciB1c2VycywgdHJ5IHRvIGdldCBleGlzdGluZyB1c2VybmFtZSBvciBnZW5lcmF0ZSBhIG5ldyBvbmVcbiAgICAgICAgY29uc3Qgc2F2ZWRVc2VybmFtZSA9IGdldFNhdmVkVXNlcm5hbWUoKTtcbiAgICAgICAgaWYgKHNhdmVkVXNlcm5hbWUpIHtcbiAgICAgICAgICBzZXRVc2VybmFtZShzYXZlZFVzZXJuYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCBuZXdVc2VybmFtZSA9IGdlbmVyYXRlUmFuZG9tVXNlcm5hbWUoKTtcbiAgICAgICAgICBzYXZlVXNlcm5hbWUobmV3VXNlcm5hbWUpO1xuICAgICAgICAgIHNldFVzZXJuYW1lKG5ld1VzZXJuYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEdldCBleGlzdGluZyBwcm9maWxlIHBpY3R1cmUgb3IgZmV0Y2ggYSBuZXcgb25lXG4gICAgICAgIGNvbnN0IHNhdmVkUHJvZmlsZVBpY3R1cmUgPSBnZXRTYXZlZFByb2ZpbGVQaWN0dXJlKCk7XG4gICAgICAgIGlmIChzYXZlZFByb2ZpbGVQaWN0dXJlKSB7XG4gICAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUoc2F2ZWRQcm9maWxlUGljdHVyZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld1Byb2ZpbGVQaWN0dXJlID0gYXdhaXQgZmV0Y2hSYW5kb21Qcm9maWxlUGljdHVyZSgpO1xuICAgICAgICAgICAgc2F2ZVByb2ZpbGVQaWN0dXJlKG5ld1Byb2ZpbGVQaWN0dXJlKTtcbiAgICAgICAgICAgIHNldFByb2ZpbGVQaWN0dXJlKG5ld1Byb2ZpbGVQaWN0dXJlKTtcbiAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2ZpbGUgcGljdHVyZTpcIiwgZXJyb3IpO1xuICAgICAgICAgICAgc2V0UHJvZmlsZVBpY3R1cmUoXCIvcHJvZmlsZXMvZGVmYXVsdF9wcm9maWxlLmpwZWdcIik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgc2V0TG9hZGluZyhmYWxzZSk7XG4gICAgcmV0dXJuIHsgZGF0YSwgZXJyb3IgfTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNlc3Npb24sXG4gICAgdXNlcjogc2Vzc2lvbj8udXNlciB8fCBudWxsLFxuICAgIGlzQWRtaW4sXG4gICAgbG9hZGluZyxcbiAgICBlcnJvcixcbiAgICB1c2VybmFtZSxcbiAgICBwcm9maWxlUGljdHVyZSxcbiAgICBzaWduSW5Bbm9ueW1vdXNseTogaGFuZGxlU2lnbkluQW5vbnltb3VzbHksXG4gICAgc2lnbkluV2l0aEVtYWlsOiBoYW5kbGVTaWduSW5XaXRoRW1haWwsXG4gICAgc2lnbk91dDogaGFuZGxlU2lnbk91dCxcbiAgICByZWZyZXNoVXNlcm5hbWU6IGhhbmRsZVJlZnJlc2hVc2VybmFtZSxcbiAgICByZWZyZXNoUHJvZmlsZVBpY3R1cmU6IGhhbmRsZVJlZnJlc2hQcm9maWxlUGljdHVyZSxcbiAgfTtcbn07XG4iXSwibmFtZXMiOlsidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJzdXBhYmFzZSIsInNpZ25JbkFub255bW91c2x5Iiwic2lnbkluV2l0aEVtYWlsIiwic2lnbk91dCIsImdldFNlc3Npb24iLCJnZW5lcmF0ZVJhbmRvbVVzZXJuYW1lIiwiZ2V0U2F2ZWRVc2VybmFtZSIsInNhdmVVc2VybmFtZSIsInJlZnJlc2hVc2VybmFtZSIsInJlZnJlc2hSYW5kb21Vc2VybmFtZSIsImdldFNhdmVkUHJvZmlsZVBpY3R1cmUiLCJzYXZlUHJvZmlsZVBpY3R1cmUiLCJmZXRjaFJhbmRvbVByb2ZpbGVQaWN0dXJlIiwicmVmcmVzaFByb2ZpbGVQaWN0dXJlIiwidXNlQXV0aCIsInNlc3Npb24iLCJzZXRTZXNzaW9uIiwibG9hZGluZyIsInNldExvYWRpbmciLCJlcnJvciIsInNldEVycm9yIiwiaXNBZG1pbiIsInNldElzQWRtaW4iLCJ1c2VybmFtZSIsInNldFVzZXJuYW1lIiwicHJvZmlsZVBpY3R1cmUiLCJzZXRQcm9maWxlUGljdHVyZSIsImluaXRpYWxpemVBdXRoIiwiY3VycmVudFNlc3Npb24iLCJjb25zb2xlIiwibWVzc2FnZSIsInVzZXIiLCJlbWFpbCIsImVuZHNXaXRoIiwic2F2ZWRVc2VybmFtZSIsIm5ld1VzZXJuYW1lIiwic2F2ZWRQcm9maWxlUGljdHVyZSIsIm5ld1Byb2ZpbGVQaWN0dXJlIiwiZGF0YSIsImF1dGhMaXN0ZW5lciIsImF1dGgiLCJvbkF1dGhTdGF0ZUNoYW5nZSIsImV2ZW50Iiwic3Vic2NyaXB0aW9uIiwidW5zdWJzY3JpYmUiLCJoYW5kbGVTaWduSW5Bbm9ueW1vdXNseSIsImhhbmRsZVJlZnJlc2hVc2VybmFtZSIsImhhbmRsZVJlZnJlc2hQcm9maWxlUGljdHVyZSIsImhhbmRsZVNpZ25PdXQiLCJsb2NhbFN0b3JhZ2UiLCJyZW1vdmVJdGVtIiwiaGFuZGxlU2lnbkluV2l0aEVtYWlsIiwicGFzc3dvcmQiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(app-pages-browser)/./hooks/useAuth.ts\n"));

/***/ })

});